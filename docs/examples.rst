Example usage
=============

Code is often best learned by usage. This section gathers together
a few examples; others can be found amongst the scripts.

Reading a raw data file
-----------------------

Suppose we have the files "run012.xml" and "run012.dat" together in a 
directory and that this run contain 75 exposures of a field. Then we can 
read the 15th exposure as follows::

 rdat = ultracam.Rdata('run012')
 mccd = rdat(15)

The first line returns an *Rdata* object which can be thought of as the
Python representation of the raw data file. The second line then calls this
object to return the 15\ :sup:`th` exposure. The exposure or frame is returned 
in an *MCCD* object which is a data structure designed to contain the
multiple, windowed CCD frame generated by ULTRACAM. *MCCD* objects provide
direct access to the data, for instance, ``mccd[1]`` is the 2\ :sup:`nd` CCD
while ``mccd[1][2]`` is the 3\ :sup:`rd` window of the 2\ :sup:`nd` CCD. The 
first is a *CCD* object while the second is a *Window* object.

Modifying an MCCD
-----------------

*Window* objects are closely related to numpy arrays and support several of
the same arithmetical operations. Here is how to read the frame 14 and add
50 to window 4 of CCD 3 (0 indexed)::

  rdat = ultracam.Rdata('run012')
  mccd = rdat(14)
  win  = mccd[2][3]
  win += 50.

Because of the reference semantics of Python, this has modified mccd itself.

Adding a constant to an MCCD
----------------------------

*MCCD* and *CCD* objects are iterable meaning that the following adds 50 to 
all windows of all CCDs::

  for ccd in mccd:
     for win in ccd:
        win += 50.

This particular example can be carried out more simply because the two objects
also support some equivalent arithmetic operations. For instance we could have 
written::

  for ccd in mccd:
     ccd += 50.

or even just::

  mccd += 50.

Reading a raw data file sequentially
------------------------------------

*Rdata* objects are also iterable. This makes reading a raw data file
frame-by-frame easy::

  rdat = ultracam.Rdata('run012')
  for mccd in rdat:
     ... do something with mccd ...

  print 'Finished reading run012'

Writing data to disk
--------------------

MCCD objects are easily written to disk as ucm files::

  mccd.wucm('image')





